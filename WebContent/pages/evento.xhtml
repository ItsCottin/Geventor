<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
   xmlns:p="http://primefaces.org/ui"
   xmlns:c="http://java.sun.com/jsp/jstl/core"
   template="/WEB-INF/template/layoutV3.xhtml">
   <ui:define name="contentV3">
      <script type="text/javascript">
         var voltarCard;
         function selAbaTbl(voltar) {
        	 if (voltar == 'nao') {
        		voltarCard = voltar
        	 }
        	 if (voltarCard == 'nao') {
          		 $('.nav-tabs a[href="#visualizar"]').tab('show');
        	 } else {
        		 $('.nav-tabs a[href="#disponiveis"]').tab('show');
        		 $('.nav-tabs a[href="#visualizar"]').tab('show');
        	 }
         }
         
         function selAbaEdit(voltar) {
        	 voltarCard = voltar;
         	var tabEditTitle = document.getElementById("tabEditTitle");
         	voltarCard
          	        // Atualiza o conteudo do elemento
          	        tabEditTitle.innerHTML = "#{eventoMB.editEvento.id eq null ? 'Adicionar' : 'Editar'}";
          	     	$('.nav-tabs a[href="#gerenciar"]').tab('show');
          			$('.nav-tabs a[href="#adicionareditar"]').tab('show');
          			
         }
         function openConfirmedDel() {
                $('#confirmDel').modal('show');
            }
         
         function openModalConsAtividade() {
                $('#modalConsAtividade').modal('show');
            }
         
         function closeConfirmedDel() {
                $('#confirmDel').modal('hide');
                window.location.reload();
            }
          
      </script>
      <ul class="nav nav-tabs">
         <li>
            <a data-toggle="pill" class="nav-link" href="#gerenciar">Gerenciar</a>
         </li>
         <li class="active">
            <a data-toggle="pill" class="nav-link active" aria-current="page" href="#disponiveis">Eventos Disponíveis</a>
         </li>
      </ul>
      <div class="tab-content py-4">
         <div id="gerenciar" class="tab-pane">
            <ul class="nav nav-tabs">
               <li class="active">
                  <a data-toggle="pill" class="nav-link active" aria-current="page" href="#visualizar">Visualizar</a>
               </li>
               <li>
                  <a id="tabEditTitle" data-toggle="pill" class="nav-link" href="#adicionareditar">#{eventoMB.editEvento.id eq null ? 'Adicionar' : 'Editar'}</a>
               </li>
            </ul>
            <div class="tab-content py-4">
               <div id="visualizar" class="tab-pane active">
                  <h1 class="">Eventos</h1>
                  <p:separator style="width:99%;" />
                  <h:form id="formtbl">
                     <table class="table table-hover" id="tblEven">
                        <thead>
                           <tr>
                              <th scope="col">Título</th>
                              <th class="d-none d-lg-block" scope="col">Data</th>
                              <th scope="col">Cidade</th>
                              <th class="d-none d-sm-block" scope="col">Estado</th>
                              <th scope="col">Vaga</th>
                              <th class="d-none d-md-block" scope="col">Preço</th>
                              <th scope="col">Configurar</th>
                           </tr>
                        </thead>
                        <c:forEach var="even" items="#{eventoMB.resultadoEvento}" step="1" begin="0">
                           <tr>
                              <th scope="col" class="p-3 mb-2 bg-light text-dark">#{even.titulo}</th>
                              <th class="d-none d-lg-block font-weight-normal" scope="col">
                              	#{atividadeMB.formatarDataFromTela({'data': even.dataInicio, 'formato': 'dd/MM'})} às #{atividadeMB.formatarDataFromTela({'data': even.dataInicio, 'formato': 'HH:mm'})}
                              </th>
                              <th scope="col" class="font-weight-normal">#{even.cidade}</th>
                              <th class="d-none d-sm-block font-weight-normal" scope="col">#{even.estado}</th>
                              <th scope="col" class="font-weight-normal">#{even.vagas}</th>
                              <th class="d-none d-md-block font-weight-normal" scope="col">#{even.vlr}</th>
                              <th scope="col" class="font-weight-normal">
                                 <p:commandButton immediate="true" id="consultar_#{even.id}"
                                    icon="ui-icon-search" title="Consultar"
                                    actionListener="#{eventoMB.doConsulta({'evento': even, 'request': 'tabela'})}" update=":formEvent"
                                    process="@this" oncomplete="selAbaEdit('nao')" styleClass="ui-icon-button-rcf">
                                 </p:commandButton>
                                 <p:commandButton immediate="true" id="editar_#{even.id}"
                                    icon="ui-icon-wrench" title="Editar"
                                    actionListener="#{eventoMB.doEdit(even)}" update=":formEvent"
                                    process="@this" oncomplete="selAbaEdit('nao')" styleClass="ui-icon-button-rcf">
                                 </p:commandButton>
                                 <p:commandButton immediate="true" icon="ui-icon-trash" id="excluir_#{even.id}"
                                    title="Excluir" oncomplete="openConfirmedDel()" actionListener="#{eventoMB.setEvenSel(even)}"
                                    update=":msgs, formtbl:formmodal" styleClass="ui-icon-button-rcf" />
                                 <!-- Modal -->
                                 <div class="modal fade" id="confirmDel" tabindex="-1" role="dialog" aria-labelledby="confirmDel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                       <div class="modal-content">
                                          <div class="modal-header">
                                             <h5 class="modal-title" id="exampleModalLabel">Confirmação</h5>
                                             <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                             <span aria-hidden="true"></span>
                                             </button>
                                          </div>
                                          <div class="modal-body">
                                             <h:form id="formmodal">
                                                <h:outputLabel value="Deseja realmente excluir esse evento ?" />
                                             </h:form>
                                          </div>
                                          <div class="modal-footer">
                                             <button type="button" class="btn" data-dismiss="modal">Não</button>
                                             <p:commandButton styleClass="btn btn-danger ui-widget-button-danger-rcf" value="Sim" 
                                                oncomplete="closeConfirmedDel()" 
                                                actionListener="#{eventoMB.doRemove(eventoMB.evenSel)}" update=":msgs :formtbl" />
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </th>
                           </tr>
                        </c:forEach>
                     </table>
                  </h:form>
               </div>
               <div id="adicionareditar" class="tab-pane">
                  <div class="col-md-12">
                     <h:form id="formEvent">
                        <h3 class="">#{eventoMB.editEvento.id eq null ? 'Adicionar Evento' : (eventoMB.modoConsulta ? 'Consultando o Evento' : 'Editar Evento')}</h3>
                        <p:separator style="width:99%;" />
                        <p:panelGrid rendered="#{eventoMB.editEvento.existeInscrito}">
		                	<div class="col-md-12 col-lg-12">
		                    	<div class="alert alert-warning" role="alert">
									Atenção!, Não é possivel realizar alteração nesse Evento, existem atividades vinculadas com inscritos Aprovados ou Pendentes
								</div>
		                    </div>
	                    </p:panelGrid>
                        <div class="col-md-12 col-lg-12">
                           <div class="row mb-3 border-rcf">
                           	<div class="col-lg-2 col-md-2 col-sm-2 col-small-3-rcf form-group text-right text-truncate">
                              	<label for="titulo" class="col-form-label">Título:</label>
                             </div>
                              <div class="col-lg-6 col-md-6 col-sm-5 col-small-9-rcf form-group">
                                 <p:inputText class="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}" id="titulo" 
                                 	value="#{eventoMB.editEvento.titulo}" label="Nome" required="true" disabled="#{eventoMB.modoConsulta}" />
                              </div>
                              <div class="col-lg-2 col-md-2 col-sm-2 col-small-4-rcf form-group text-right text-truncate">
                                 <label for="vagas" class="col-form-label">Vagas:</label>
                              </div>
                              <div class="col-lg-2 col-md-2 col-sm-3 col-small-8-rcf form-group">
                                 <h:inputText styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}" id="vagas" disabled="#{eventoMB.modoConsulta}"
                                    value="#{eventoMB.editEvento.vagas}" label="Vagas" />
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-4 col-small-4-rcf form-group text-right text-truncate">
                                 <label for="from" class="col-form-label">Começa:</label>
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-8 col-small-8-rcf form-group">
                                 <p:inputText pt:type="date" label="Data inicio"
                                    styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}" disabled="#{eventoMB.modoConsulta}" 
                                    value="#{eventoMB.editEvento.dataInicio}" required="true"
                                    id="dataInicio" placeholder="Data inicio">
                                    <p:ajax event="blur" listener="#{eventoMB.validarDatasEvento}" update="datafim, dataInicio" />
                                    <f:convertDateTime pattern="yyyy-MM-dd" locale="pt_BR" timeZone="UTC"/>
                                 </p:inputText>
                                 <!-- <f:convertDateTime pattern="yyyy-MM-dd"  locale="pt_BR" timeZone="America/Sao_Paulo" /> -->
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-4 col-small-6-rcf form-group text-right text-truncate">
                                 <label for="horafrom" class="col-form-label">Hora Começo:</label>
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-8 col-small-6-rcf form-group">
                                 <p:inputMask mask="99:99" timeOnly="true" styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}"
                                    value="#{eventoMB.editEvento.horaInicio}" required="true" timeZone="UTC"
                                    label="Hora inicio" id="horafrom" disabled="#{eventoMB.modoConsulta}" >
                                    <p:ajax event="blur" listener="#{eventoMB.validaHoraIniEvenHoraFimEven}" update="horafim, horafrom" />
                                    <f:convertDateTime pattern="HH:mm" locale="pt_BR" timeZone="UTC" />
                                 </p:inputMask>
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-4 form-group col-small-4-rcf text-right text-truncate">
                                 <label for="datafim" class="col-form-label">Termina:</label>
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-8 form-group col-small-8-rcf">
                                 <p:inputText pt:type="date" label="Data Fim" 
                                    styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}" disabled="#{eventoMB.modoConsulta}" 
                                    value="#{eventoMB.editEvento.dataFim}" required="true"
                                    id="datafim" placeholder="Data inicio" converter="ConversorDateView" >
                                    <p:ajax event="blur" listener="#{eventoMB.validarDatasEvento}" update="datafim, dataInicio" />
                                    <f:convertDateTime pattern="yyyy-MM-dd" locale="pt_BR" timeZone="UTC"/>
                                 </p:inputText>
                                  <!-- <f:convertDateTime pattern="yyyy-MM-dd"  locale="pt_BR" timeZone="America/Sao_Paulo" /> -->
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-4 col-small-6-rcf form-group text-right text-truncate">
                                 <label for="horafim" class="col-form-label">Hora Termino:</label>
                              </div>
                              <div class="col-lg-3 col-md-3 col-sm-8 col-small-6-rcf form-group">
                                 <p:inputMask mask="99:99" timeOnly="true" styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}"
                                    value="#{eventoMB.editEvento.horaFim}" required="true" timeZone="UTC"
                                    label="Hora inicio" id="horafim" disabled="#{eventoMB.modoConsulta}" >
                                 	<p:ajax event="blur" listener="#{eventoMB.validaHoraIniEvenHoraFimEven}" update="horafim, horafrom" />
                                 	<f:convertDateTime pattern="HH:mm" locale="pt_BR" timeZone="UTC" />
                                 </p:inputMask>
                              </div>
                           </div>
                           <div class="row mb-3 border-rcf">
                           		<div class="col-lg-6 col-md-6 col-sm-7 col-small-12-rcf form-group input-group">
                                 <div class="input-group-prepend bg-light border border-light">
                                    <div class="input-group-text">
                                       <h:selectBooleanCheckbox styleClass="" disabled="#{eventoMB.modoConsulta}" 
                                          value="#{eventoMB.editEvento.usaMyEndereco}" id="usaMyEndereco">
                                          <p:ajax event="change" update="cep, uf, cidades, numero, local, bairro, usaMyEndereco" listener="#{eventoMB.onChangeMyEndereco}" />
                                       </h:selectBooleanCheckbox>
                                    </div>
                                 </div>
                                 <input type="text" class="form-control bg-light border border-light" aria-label="Text input with checkbox" 
                                    value="utilizar meu endereço?" disabled="true" />
                              </div>
                              
                              <div class="col-lg-2 col-md-2 col-sm-1 col-small-4-rcf form-group text-right">
		                          <label for="cep" class="col-form-label">CEP:</label>
		                      </div>
		                      <div class="col-lg-4 col-md-4 col-sm-4 col-small-8-rcf form-group">
		                          <p:inputMask value="#{eventoMB.editEvento.cep}" label="cep" mask="99999-999"
										styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.cepvalidoinformado ? 'bg-light border border-light' : 'border border-info bg-white')}" 
										disabled="#{eventoMB.modoConsulta ? 'true' : (eventoMB.cepvalidoinformado ? 'true' : 'false')}" id="cep">
										<p:ajax event="blur" listener="#{eventoMB.findEnderecoByCEP()}" update="uf, cidades, numero, local, bairro, usaMyEndereco"/>
								</p:inputMask>
		                      </div>
                              <div class="col-lg-4 col-md-6 col-sm-6 col-small-12-rcf form-group">
                                 <h:selectOneMenu styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.cepvalidoinformado ? 'bg-light border border-light' : 'bg-white')}" styname="uf"
                                    id="uf" required="true" value="#{eventoMB.editEvento.estado}"
                                    label="Estado" disabled="#{eventoMB.modoConsulta ? 'true' : (eventoMB.cepvalidoinformado ? 'true' : 'false')}" >
                                    <f:ajax listener="#{eventoMB.onEstadoChange}" render="cidades" />
                                    <f:selectItem itemValue="" itemLabel="Selecione um Estado"
                                       noSelectionOption="true" />
                                    <f:selectItems value="#{eventoMB.estados}" var="est"
                                       itemLabel="#{est.uf}" itemValue="#{est.uf}" />
                                 </h:selectOneMenu>
                              </div>
                              <div class="col-lg-4 col-md-6 col-sm-6 col-small-12-rcf form-group">
                                 <h:selectOneMenu required="true" styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.cepvalidoinformado ? 'bg-light border border-light' : 'bg-white')}"
                                    value="#{eventoMB.editEvento.cidade}" label="Cidade"
                                    id="cidades" disabled="#{eventoMB.modoConsulta ? 'true' : (eventoMB.cepvalidoinformado ? 'true' : 'false')}" >
                                    <p:ajax update="cidades" listener="#{eventoMB.validaDDDAfterSelCidade}" />
                                    <f:selectItem itemValue="" itemLabel="Selecione uma Cidade"
                                       noSelectionOption="true" />
                                    <f:selectItems value="#{eventoMB.cidades}" var="cid"
                                       itemLabel="#{cid.name}" itemValue="#{cid.name}" />
                                 </h:selectOneMenu>
                              </div>
                              <div class="col-lg-2 col-md-2 col-sm-2 col-small-4-rcf form-group text-right">
		                            <label for="numero" class="col-form-label">Número:</label>
		                        </div>
		                        <div class="col-lg-2 col-md-4 col-sm-4 col-small-8-rcf form-group">
		                            <h:inputText class="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}" id="numero" value="#{eventoMB.editEvento.numeroLugar}" label="Número"
		                            	disabled="#{eventoMB.modoConsulta}" />
		                        </div>
                              <div class="col-lg-2 col-md-2 col-sm-2 col-small-4-rcf form-group text-right">
                                 <label for="endereco" class="col-form-label">Endereço:</label>
                              </div>
                              <div class="col-lg-4 col-md-4 col-sm-4 col-small-8-rcf form-group">
                                 <h:inputText class="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.cepvalidoinformado ? 'bg-light border border-light' : 'bg-white')}" id="local" value="#{eventoMB.editEvento.endereco}" label="endereco" required="true"
                                    disabled="#{eventoMB.modoConsulta ? 'true' : (eventoMB.cepvalidoinformado ? 'true' : 'false')}" />
                              </div>
                              
		                        <div class="col-lg-2 col-md-2 col-sm-2 col-small-4-rcf form-group text-right">
	                            	<label for="bairro" class="col-form-label">Bairro:</label>
	                        	</div>
	                        	<div class="col-lg-4 col-md-4 col-sm-4 col-small-8-rcf form-group">
	                            	<h:inputText class="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.cepvalidoinformado ? 'bg-light border border-light' : 'bg-white')}" id="bairro" 
	                            	value="#{eventoMB.editEvento.bairro}" label="Bairro" disabled="#{eventoMB.modoConsulta ? 'true' : (eventoMB.cepvalidoinformado ? 'true' : 'false')}" />
	                        	</div>
		                    </div>
                           <div class="row mb-3 border-rcf">
	                           		<div class="col-md-6 col-sm-12 form-group input-group">
	                                 <div class="input-group-prepend bg-light border border-light">
	                                    <div class="input-group-text">
	                                       <h:selectBooleanCheckbox styleClass="" disabled="#{eventoMB.modoConsulta}" 
	                                          value="#{eventoMB.editEvento.usaMyTelefone}">
	                                          <p:ajax event="change" update="celular, email" listener="#{eventoMB.onChangeMyTelefone}" />
	                                       </h:selectBooleanCheckbox>
	                                    </div>
	                                 </div>
	                                 <input type="text" class="form-control bg-light border border-light" aria-label="Text input with checkbox" 
	                                    value="utilizar meu Telefone?" disabled="true" />
	                              </div>
		                        <div class="col-md-3 col-sm-6 col-small-6-rcf form-group text-right text-truncate">
		                            <label for="atualizarsenha" class="col-form-label">Telefone ou Celular?</label>
		                        </div>
		                        <div class="col-md-3 col-sm-6 col-small-6-rcf form-group">
		                            <h:selectOneMenu styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}"
		                                value="#{eventoMB.usaTelefone}" label="Telefone ou Celular?"
		                                id="telefonecelular" disabled="#{eventoMB.modoConsulta}" >
		                                <p:ajax  update="celular" event="change" listener="#{eventoMB.onChangeMyTelefone}" />
		                                <f:selectItem itemValue="Telefone" itemLabel="Telefone"
		                                    noSelectionOption="true" />
		                                <f:selectItem itemValue="Celular" itemLabel="Celular"
		                                  	noSelectionOption="true" />
		                            </h:selectOneMenu>
		                        </div>
		                        <div class="col-md-2 col-sm-4 col-small-4-rcf form-group text-right">
                                 <label for="email" class="col-form-label">E-mail:</label>
                              </div>
                              <div class="col-md-5 col-sm-8 col-small-8-rcf form-group">
                                 <h:inputText styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.editEvento.usaMyTelefone eq false ? 'bg-white' : 'bg-light border border-light')}" 
                                 	disabled="#{eventoMB.modoConsulta eq true ? 'true' : (eventoMB.editEvento.usaMyTelefone eq false ? 'false' : 'true')}" value="#{eventoMB.editEvento.email}" id="email"
                                    validatorMessage="formato de email inválido" label="E-mail">
                                    <f:validateRegex
                                       pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                 </h:inputText>
                              </div>
                              	<div class="col-md-2 col-sm-4 col-small-4-rcf form-group text-right">
                            		<label for="celular" class="col-form-label">#{eventoMB.usaTelefone}:</label>
		                        </div>
		                        <div class="col-md-3 col-sm-5 col-small-8-rcf form-group">
		                            <p:inputMask pt:type="" styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : (eventoMB.editEvento.usaMyTelefone eq false ? 'bg-white' : 'bg-light border border-light')}" id="celular"
		                                    label="Celular" mask="#{eventoMB.maskTelefone}" disabled="#{eventoMB.modoConsulta eq true ? 'true' : (eventoMB.editEvento.usaMyTelefone eq false ? 'false' : 'true')}"
		                                    value="#{eventoMB.editEvento.telefone}" >
		                                <p:ajax event="blur" listener="#{eventoMB.validaDDD(eventoMB.editEvento.telefone)}" update="celular"/>
		                            </p:inputMask>
		                        </div>
                              
                           </div>
                           <div class="row mb-3 border-rcf">
                           	<div class="col-md-6 col-sm-12 form-group input-group">
                                 <div class="input-group-prepend bg-light border border-light">
                                    <div class="input-group-text">
                                       <h:selectBooleanCheckbox styleClass="" disabled="#{eventoMB.modoConsulta}" 
                                          value="#{eventoMB.editEvento.siteProprio}">
                                          <p:ajax event="change" update="cbxSiteProprio" />
                                       </h:selectBooleanCheckbox>
                                    </div>
                                 </div>
                                 <input type="text" class="form-control bg-light border border-light" aria-label="Text input with checkbox" 
                                    value="utilizar site fornecido pelo geventor." disabled="true" />
                              </div>
                           	<div class="col-md-6 col-sm-12 form-group input-group">
                                 <h:inputText styleClass="form-control #{eventoMB.editEvento.siteProprio ? 'bg-light border border-light' : (eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white')}" placeholder="Site proprio do Evento"
                                    value="#{eventoMB.editEvento.site}" 
                                    disabled="#{eventoMB.editEvento.siteProprio or eventoMB.modoConsulta}"
                                    label="site do evento" id="cbxSiteProprio" />
                                 <div class="input-group-prepend">
                                    <span class="input-group-text" id="basic-addon3">.eventor.com.br</span>
                                 </div>
                              </div>
                              
                             
	                              
	                              <div class="col-md-3 col-sm-6 col-small-6-rcf form-group text-right text-truncate">
		                            	<label for="evenpago" class="col-form-label">Evento Pago?</label>
				                   </div>
				                   <div class="col-md-3 col-sm-6 col-small-6-rcf form-group">
				                            <h:selectOneMenu styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}"
				                                value="#{eventoMB.editEvento.vlr}" label="Evento pago?"
				                                id="evenpago" disabled="#{eventoMB.modoConsulta}" >
				                                <p:ajax event="change" listener="#{eventoMB.onChangePrecoEven}" />
				                                <f:selectItem itemValue="Pago" itemLabel="Pago"
				                                    noSelectionOption="true" />
				                                <f:selectItem itemValue="Gratuito" itemLabel="Gratuito"
				                                  	noSelectionOption="true" />
				                            </h:selectOneMenu>
				                        </div>                           
		                           </div>
		                           
                           <div class="row mb-3 border-rcf">
                              <div class="col-sm-12 form-group">
                                 <h:inputTextarea rows="5" cols="100" counter="display" placeholder="Descrição do Evento"
                                    maxlength="250" counterTemplate="{0} caracteres restantes." disabled="#{eventoMB.modoConsulta}"
                                    autoResize="false" value="#{eventoMB.editEvento.descricao}"
                                    label="Descrição" styleClass="form-control #{eventoMB.modoConsulta ? 'bg-light border border-light' : 'bg-white'}" />
                              </div>
                           </div>
                           <div class="row mb-3">
                              <div class="col-sm-12">
                                 <div class="btn-group" role="group" aria-label="Basic example">
                                    <p:commandButton rendered="#{!eventoMB.modoConsulta}"
                                       value="#{eventoMB.editEvento.id eq null ? 'Cadastra Evento' : 'Salvar Alterações'}"
                                       id="btnEdit" styleClass="btn btn-success ui-widget-button-success-rcf"
                                       actionListener="#{eventoMB.doSave}" update=":formtbl :formEvent"
                                       oncomplete="selAbaTbl('nao');" >
                                       <p:ajaxStatus onstart="PF('status').show()" onsuccess="PF('status').hide()" />
                                       <f:ajax render="tblEven" />
                                    </p:commandButton>
                                    <p:commandButton rendered="#{eventoMB.editEvento.id eq null ? 'false' : 'true'}"
                                       value="#{eventoMB.modoConsulta ? 'Voltar' : 'Cancelar'}"
                                       id="btnCan" styleClass="btn btn-danger ui-widget-button-danger-rcf"
                                       actionListener="#{eventoMB.doPrepareSave}" update=":formEvent"
                                       oncomplete="selAbaTbl();"  >
                                       <p:ajaxStatus onstart="PF('status').show()" onsuccess="PF('status').hide()" />
                                       <f:ajax render="tblEven" />
                                    </p:commandButton>
                                 </div>
                              </div>
                           </div>
                           <table class="table table-hover text-center" id="tblAtiv" >
                              <thead>
                                 <tr>
                                    <th scope="col">Atividade</th>
                                    <th scope="col">Vagas</th>
                                    <th scope="col">Configurar</th>
                                 </tr>
                              </thead>
                              <c:forEach var="ativ" items="#{eventoMB.resultadoAtividadeByEvento}" step="1" begin="0">
                                 <tr>
                                    <th scope="col" class="bg-light text-dark font-weight-normal">#{ativ.nome}</th>
                                    <th class="font-weight-normal" scope="col">#{ativ.vagas}</th>
                                    <th scope="col" class="align-items-end">
                                       <div class="btn-group" role="group" aria-label="Basic example">
	                                       <p:commandButton immediate="true" id="consultar_#{ativ.id}"
	                                          icon="ui-icon-search" title="Consultar"
	                                          actionListener="#{atividadeMB.doConsulta(ativ)}" update=":formHtmlModal"
	                                          process="@this" oncomplete="openModalConsAtividade()" styleClass="ui-icon-button-rcf">
	                                          <p:ajaxStatus onstart="PF('status').show()"
                        						onsuccess="PF('status').hide()" />
	                                       </p:commandButton> <!-- adicionar condição pra deixar de se inscrever e mudar o 'icon' para 'ui-icon-minusthick' ou 'ui-icon-minus'  -->
	                                       <p:commandButton immediate="true" id="increver_#{ativ.id}"
	                                          icon="ui-icon-plus" title="#{ativ.estaInscrito eq 'True' ? 'Você já está inscrito' : 'Inscrever'}" value="Increver" disabled="#{ativ.estaInscrito}"
	                                          actionListener="#{eventoMB.doIncrever(ativ)}" update=":formEvent"
	                                          process="@this" oncomplete="" styleClass="btn btn-outline-secondary ui-widget-button-secundary-rcf">
	                                          <p:ajaxStatus onstart="PF('status').show()"
                        						onsuccess="PF('status').hide()" />
	                                       </p:commandButton>
                                       </div>
                                    </th>
                                 </tr>
                              </c:forEach>
                           </table>  
                        </div>
                     </h:form>
                     <h:form id="formHtmlModal">
                     
                     <!-- modal -->
					 <!-- <div class="modal fade" id="modalConsAtividade" tabindex="-1" role="dialog" aria-labelledby="confirmDel" aria-hidden="true">
						   <div class="modal-dialog modal-xl" role="document">
						      <div class="modal-content">
						         <div class="modal-header">
						            <h5 class="modal-title" id="exampleModalLabel">
						               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						               <span aria-hidden="true"></span>
						               </button>
						               <h:outputText value="Evento: #{editAtividade.evento.titulo}" />
						            </h5>
						         </div>
						         <div class="modal-body">
						            <h:form id="modalformAtiv">
						               <h3 class="mb-3">
						                  <h:outputText value="Atividade: #{editAtividade.nome}" />
						               </h3>
						               <div class="col-md-12 col-lg-12">
						                  <div class="row mb-3 border-rcf">
						                     <div class="col-sm-12 row">
						                        <p class="font-weight-normal">
						                           <h:outputText value="Detalhes da Atividade: #{editAtividade.detalhes}" />
						                        </p>
						                     </div>
						                     <div class="col-sm-6 row">
						                        <p class="font-weight-normal">
						                           <h:outputText value="Começa: #{editAtividade.dataInicio}" />
						                        </p>
						                     </div>
						                     <div class="col-sm-6 row">
						                        <p class="font-weight-normal">
						                           <h:outputText value="Termina: #{editAtividade.dataFim}" />
						                        </p>
						                     </div>
						                     <div class="col-sm-12">
						                        <div class="row">
						                           <p class="font-weight-normal">
						                              <h:outputText value="Preço: #{editAtividade.preco}" />
						                           </p>
						                        </div>
						                        <div class="row">
						                        	<p class="font-weight-normal">
						                              <h:outputText value="Vagas: #{editAtividade.vagas}" />
						                            </p>
						                        </div>
						                        <div class="row">
						                        	<button class="btn btn-outline-secondary" type="button" id="button-addon2">Inscrever</button>
						                        </div>
						                     </div>
						                  </div>
						               </div>
						               <div class="col-md-12 col-lg-12 ui-padding-right-0-rcf">
						                  <div class="d-flex align-items-end flex-column">
								            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
								         </div>
								       </div>
						            </h:form>
						         </div>
						      </div>
						   </div>
						</div> -->
                        <h:outputText value="#{atividadeMB.htmlModalAtiv}" escape="false" />
                     </h:form>
                     <script type="text/javascript">
                        PrimeFaces.locales['tr'] = {
                        	closeText : 'kapat',
                        	prevText : 'geri',
                        	nextText : 'ileri',
                        	currentText : 'bugün',
                        	monthNames : [ 'Ocak', 'Şubat', 'Mart', 'Nisan',
                        			'Mayıs', 'Haziran', 'Temmuz', 'Ağustos',
                        			'Eylül', 'Ekim', 'Kasım', 'Aralık' ],
                        	monthNamesShort : [ 'Oca', 'Şub', 'Mar', 'Nis',
                        			'May', 'Haz', 'Tem', 'Ağu', 'Eyl', 'Eki',
                        			'Kas', 'Ara' ],
                        	dayNames : [ 'Pazar', 'Pazartesi', 'Salı',
                        			'Çarşamba', 'Perşembe', 'Cuma', 'Cumartesi' ],
                        	dayNamesShort : [ 'Pz', 'Pt', 'Sa', 'Ça', 'Pe',
                        			'Cu', 'Ct' ],
                        	dayNamesMin : [ 'Pz', 'Pt', 'Sa', 'Ça', 'Pe', 'Cu',
                        			'Ct' ],
                        	weekHeader : 'Hf',
                        	firstDay : 0,
                        	isRTL : false,
                        	showMonthAfterYear : false,
                        	yearSuffix : '',
                        	month : 'Ay',
                        	week : 'Hafta',
                        	day : 'Gün',
                        	allDayText : 'Tüm Gün'
                        };
                     </script>
                     <p:dialog widgetVar="status" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                        <p:graphicImage name="ajaxloader.gif" library="images" />
                     </p:dialog>
                     <p:ajaxStatus onstart="PF('status').show()"
                        onsuccess="PF('status').hide()" />
                  </div>
               </div>
            </div>
         </div>
         <div id="disponiveis" class="tab-pane active">
            <h3>Eventos Disponíveis</h3>
            <p:separator style="width:99%;" />
            <h:form id="formTodosEven">
            	
               <div class="row">
               <c:forEach var="event" items="#{eventoMB.allEvenMenosMeus}" step="1" begin="0">
                  <div class="col-xd-4 col-md-4 col-sm-6 mt-4">
                     <div class="card">
                        <div class="card-header">
                           #{event.titulo}
                        </div>
                        <div class="card-body">
                           <p class="card-text">Descrição: #{event.descricao}</p>
                           <p class="card-text">Vagas: #{event.vagas} de #{event.vagas}</p>
                           
							<p:commandButton immediate="true" id="cardConsEvent_#{event.id}" value="Inscrever"
                                  actionListener="#{eventoMB.doConsulta({'evento': event, 'request': 'card'})}" update=":formEvent" 
                                  process="@this" styleClass="btn btn-primary ui-widget-button-primary-rcf" oncomplete="selAbaEdit('sim')">
                                  <p:ajaxStatus onstart="PF('status').show()"
                        			onsuccess="PF('status').hide()" />
                            </p:commandButton>
                        </div>
                        <div class="card-footer text-muted">
                           2 dias atrás
                        </div>
                     </div>
                  </div>
                  </c:forEach>
               </div>
               
            </h:form>
         </div>
      </div>
   </ui:define>
</ui:composition>